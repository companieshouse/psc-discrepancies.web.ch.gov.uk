{% extends "_layouts/default.njk" %}

{% block main_content %}

{% from "govuk/components/details/macro.njk" import govukDetails %}

<div class="chs-psc-outer chs-psc-start">
    <main class="govuk-main-wrapper govuk-main-wrapper--auto-spacing" id="main-content" role="main">

        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
              {% if this_errors is not undefined %}
              <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary">
                <h2 class="govuk-error-summary__title" id="error-summary-title">
                  There is a problem
                </h2>
                <div class="govuk-error-summary__body">
                  <ul class="govuk-list govuk-error-summary__list">
                  {% for errKey, errMsg in this_errors%}
                    <li>
                      <a href="#err-elm-{{ errKey }}">{{ errMsg.summary }}</a>
                    </li>
                  {% endfor %}
                  </ul>
                </div>
              </div>
              {% endif %}
              <form action="/report-a-discrepancy/discrepancy-details" method="post" enctype="application/json">

                  <div class="govuk-form-group{{ ' govuk-form-group--error' if this_errors is not undefined }}">
                      <label class="govuk-label" for="details">
                          <h1 class="govuk-fieldset__legend--xl govuk-!-margin-top-0">What information is incorrect for the PSC?</h1>
                      </label>
                      <span id="err-elm-details" class="govuk-error-message">
                          <span class="govuk-visually-hidden">Error:</span>
                          {{ this_errors.details.inline }}
                      </span>
                      <textarea class="govuk-textarea{{ ' govuk-textarea--error' if this_errors is not undefined }}" id="details" name="details" rows="5" maxLength="5000">{{ this_data.details }}</textarea>
                  </div>

                  <button class="govuk-button" data-module="govuk-button">
                      Submit discrepency report
                  </button>
              </form>
            </div>
        </div>

    </main>
</div>

{% endblock %}
